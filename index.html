<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Native Bridge Communication</title>
    <style>
        button {
            display: block;
            margin: 10px 0;
            padding: 10px 20px;
            font-size: 16px;
        }
        .success-bar {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            display: none;
            margin: 10px 0;
        }
        .error-bar {
            background-color: #f44336;
            color: white;
            padding: 10px;
            display: none;
            margin: 10px 0;
        }
        .list-container {
            margin: 20px 0;
        }
        .list-container ul {
            list-style-type: none;
            padding: 0;
        }
        .list-container li {
            background-color: #f1f1f1;
            margin: 5px 0;
            padding: 10px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>WebView Native Communication</h1>

    <button onclick="fetchData()">Fetch Data</button>
    <button onclick="insertData()">Insert Data</button>
    <button onclick="updateData()">Update Data</button>
    <button onclick="deleteItem()">Delete Item</button>
    <button onclick="showSuccessBar()">Show Success Bar</button>
    <button onclick="showErrorBar()">Show Error Bar</button>
    <button onclick="showAlert()">Show Alert</button>
    <button onclick="openCamera()">Open Camera</button>
    <button onclick="openGallery()">Open Gallery</button>

    <button onclick="backToHome()">Back Home</button>
    <button onclick="alertMsg()">Alert Msg</button>

    <div class="success-bar" id="successBar">Operation Successful</div>
    <div class="error-bar" id="errorBar">Operation Failed</div>

    <div class="list-container">
        <h2>List of Items</h2>
        <ul id="itemList"></ul>
    </div>

    <script type="text/javascript">

        function backToHome() {
            if ( typeof window.webkit !== "undefined" && window.webkit.messageHandlers.nativeBridge) {
                window.webkit.messageHandlers.nativeBridge.postMessage({
                    "action": "goBack",
                });
            } else if (typeof Android !== "undefined" && Android.backToHome) {
                Android.backToHome();
            }
        }

        function fetchData() {
            if ( typeof window.webkit !== "undefined" && window.webkit.messageHandlers.nativeBridge) {
                window.webkit.messageHandlers.nativeBridge.postMessage({
                    "action": "fetch",
                    "entityName": "Company"
                });
            } else if (typeof Android !== "undefined" && Android.executeSqlOnNative) {
                Android.executeSqlOnNative({
                    "database": "1",
                    "sql": "Select * from UserSettings"
                });
            }
        }

        function insertData() {
            window.webkit.messageHandlers.nativeBridge.postMessage({
                "action": "insert",
                "entityName": "Company",
                "data": {"name": "Greeeno"}
            });
        }

        function updateData() {
            window.webkit.messageHandlers.nativeBridge.postMessage({
                "action": "update",
                "entityName": "Company",
                "predicate": "name == 'Abc Inc.'",
                "data": {"name": "Twitter"}
            });
        }

        function deleteItem() {
            window.webkit.messageHandlers.nativeBridge.postMessage({
                "action": "delete",
                "entityName": "Company",
                "predicate": "id == 2"
            });
        }

        function showSuccessBar() {
            window.webkit.messageHandlers.nativeBridge.postMessage({
                "action": "showToast",
                "toastType": "success",
                "title": "Toast title",
                "message": "Successfully shown bar"
            });
        }

        function showErrorBar() {
            window.webkit.messageHandlers.nativeBridge.postMessage({
                "action": "showToast",
                "toastType": "error",
                "title": "Toast title",
                "message": "Successfully shown bar"
            });
        }

        function showAlert() {
            window.webkit.messageHandlers.nativeBridge.postMessage({
                "action": "showAlert",
                "title": "Alert Title",
                "message": "This is alert message"
            });
        }

        function openCamera() {
            if ( typeof window.webkit !== "undefined" && window.webkit.messageHandlers.nativeBridge) {
               window.webkit.messageHandlers.nativeBridge.postMessage({
                "action": "openCamera"
            });
            } else if (typeof Android !== "undefined" && Android.openCamera) {
                Android.openCamera();
            }
        }

        function openGallery() {
            if ( typeof window.webkit !== "undefined" && window.webkit.messageHandlers.nativeBridge) {
                window.webkit.messageHandlers.nativeBridge.postMessage({
                "action": "openGallery"
            });
            } else if (typeof Android !== "undefined" && Android.openGallery) {
                Android.openGallery();
            }
        }

        // New function to display a list of items
        function displayList(items) {
            const itemList = document.getElementById('itemList');
            itemList.innerHTML = ''; // Clear the list

            items.forEach(item => {
                const listItem = document.createElement('li');
                listItem.textContent = item;
                itemList.appendChild(listItem);
            });
        }

        function alertMsg() {
            printFilePath("A C E G I K");
        }

        function printFilePath(path) {
            alert("FilePath: " + path);
        }

        // Example usage of displayList
        function showSampleList() {
            const sampleItems = ["Item 1", "Item 2", "Item 3", "Item 4"];
            displayList(sampleItems);
        }

    </script>
</body>
</html>
